# π¨ System Architecture Diagrams

## High-Level System Flow

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                         USER                                 β”‚
β”‚                           β†“                                  β”‚
β”‚                    [Speaks Intent]                           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                          β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                   FRONTEND (React)                           β”‚
β”‚                                                              β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚  β”‚  Main Menu   β”‚  β”‚  Help Menu   β”‚  β”‚  Emergency   β”‚     β”‚
β”‚  β”‚              β”‚  β”‚              β”‚  β”‚    Alert     β”‚     β”‚
β”‚  β”‚  YES  NO     β”‚  β”‚  1. Water    β”‚  β”‚     π¨       β”‚     β”‚
β”‚  β”‚  HELP EMERG  β”‚  β”‚  2. Food     β”‚  β”‚              β”‚     β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚  3. Washroom β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚                    β”‚  4. Pain     β”‚                        β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚  β”‚   Audio      β”‚                    β”‚Confirmation  β”‚     β”‚
β”‚  β”‚  Recorder    β”‚                    β”‚   Dialog     β”‚     β”‚
β”‚  β”‚   π¤         β”‚                    β”‚  β“    β—     β”‚     β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚
β”‚                                                              β”‚
β”‚                    MediaRecorder API                         β”‚
β”‚                           β†“                                  β”‚
β”‚                   [Captures Audio Blob]                      β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                          β†“
                   HTTP POST (FormData)
                          β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                   BACKEND (FastAPI)                          β”‚
β”‚                                                              β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚              API Endpoints                             β”‚ β”‚
β”‚  β”‚                                                         β”‚ β”‚
β”‚  β”‚  /api/classify-intent       β†’ Main menu               β”‚ β”‚
β”‚  β”‚  /api/classify-help-option  β†’ Help submenu            β”‚ β”‚
β”‚  β”‚  /api/confirm-intent        β†’ Confirmation            β”‚ β”‚
β”‚  β”‚  /api/emergency-alert       β†’ Emergency trigger       β”‚ β”‚
β”‚  β”‚  /api/onboarding/*          β†’ Personalization         β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚                      β†“                                       β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚         Audio Processor                              β”‚   β”‚
β”‚  β”‚                                                       β”‚   β”‚
β”‚  β”‚  β€Ά Extract features from audio bytes                 β”‚   β”‚
β”‚  β”‚  β€Ά Normalize and preprocess                          β”‚   β”‚
β”‚  β”‚  β€Ά Return feature vector                             β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                      β†“                                       β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚         Intent Classifier                            β”‚   β”‚
β”‚  β”‚                                                       β”‚   β”‚
β”‚  β”‚  β€Ά Classify intent from features                     β”‚   β”‚
β”‚  β”‚  β€Ά Calculate confidence score                        β”‚   β”‚
β”‚  β”‚  β€Ά Return (intent, confidence)                       β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                      β†“                                       β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚         Confidence Gate                              β”‚   β”‚
β”‚  β”‚                                                       β”‚   β”‚
β”‚  β”‚  IF confidence < 0.85:                               β”‚   β”‚
β”‚  β”‚      requires_confirmation = True                    β”‚   β”‚
β”‚  β”‚  IF intent == EMERGENCY:                             β”‚   β”‚
β”‚  β”‚      boost_confidence()                              β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                      β†“                                       β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚         Response Builder                             β”‚   β”‚
β”‚  β”‚                                                       β”‚   β”‚
β”‚  β”‚  {                                                    β”‚   β”‚
β”‚  β”‚    intent: "YES",                                    β”‚   β”‚
β”‚  β”‚    confidence: 0.89,                                 β”‚   β”‚
β”‚  β”‚    requires_confirmation: false,                     β”‚   β”‚
β”‚  β”‚    message: "You said: Yes"                          β”‚   β”‚
β”‚  β”‚  }                                                    β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β†“
                  JSON Response
                       β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                   FRONTEND (React)                           β”‚
β”‚                                                              β”‚
β”‚  β€Ά Update UI with detected intent                           β”‚
β”‚  β€Ά Show confirmation dialog if needed                       β”‚
β”‚  β€Ά Trigger emergency alert if applicable                    β”‚
β”‚  β€Ά Display feedback to user                                 β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                          β†“
                      [User Sees Result]
```

## User Journey Flow

```
START
  β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Welcome Screen     β”‚
β”‚                     β”‚
β”‚  [Start Onboarding] β”‚
β”‚  [Skip Demo Mode]   β”‚
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β†“
       β”β”€β†’ [Skip] β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β†“                                 β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”           β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Onboarding Flow    β”‚           β”‚    Main Menu        β”‚
β”‚                     β”‚           β”‚                     β”‚
β”‚  Record samples:    β”‚           β”‚  β”β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”   β”‚
β”‚  β€Ά YES (3x)         β”‚           β”‚  β”‚YES β”‚  β”‚ NO β”‚   β”‚
β”‚  β€Ά NO (3x)          β”‚           β”‚  β””β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”   β”‚
β”‚  β€Ά HELP (3x)        β”‚           β”‚  β”β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”   β”‚
β”‚  β€Ά EMERGENCY (3x)   β”‚           β”‚  β”‚HELPβ”‚  β”‚EMERβ”‚   β”‚
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”           β”‚  β””β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”   β”‚
       β†“                           β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚                                  β†“
       β””β”€β”€β†’ [Complete] β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β†’β”‚
                                          β†“
                                    [Speak Intent]
                                          β†“
                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β†“                     β†“                     β†“
            β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
            β”‚   YES / NO   β”‚      β”‚     HELP     β”‚     β”‚  EMERGENCY   β”‚
            β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”     β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
                   β†“                      β†“                     β†“
            [Confirmation?]        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     [Alert Sent]
                   β†“               β”‚  Help Menu   β”‚           β†“
            β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”       β”‚              β”‚     [Emergency UI]
            β”‚  Confidence  β”‚       β”‚  1. Water    β”‚           β†“
            β”‚   < 0.85?    β”‚       β”‚  2. Food     β”‚     [Auto-dismiss]
            β””β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”       β”‚  3. Washroom β”‚           β†“
               β”‚        β”‚           β”‚  4. Pain     β”‚      [Return Main]
         YES β†β”€β”        β””β”€β†’ NO     β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
          β†“                   β†“             β†“
    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    [Execute]   [Speak Number]
    β”‚ Confirmation β”‚    [Success]          β†“
    β”‚   Dialog     β”‚         β†“       [Confirmation?]
    β”‚              β”‚    [Feedback]         β†“
    β”‚ β“ Confirm    β”‚         β†“       [Execute Action]
    β”‚ β— Retry      β”‚    [Return]          β†“
    β””β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”                 [Feedback]
       β†“       β†“                           β†“
  [Execute] [Retry]                  [Return Main]
       β†“       β†“
  [Success] [Back]
       β†“
  [Feedback]
       β†“
  [Return Main]
```

## Component Hierarchy

```
App
β”β”€β”€ WelcomeScreen
β”‚   β”β”€β”€ StartOnboardingButton
β”‚   β””β”€β”€ SkipButton
β”‚
β”β”€β”€ OnboardingFlow
β”‚   β”β”€β”€ ProgressBar
β”‚   β”β”€β”€ IntentLabel
β”‚   β”β”€β”€ SampleProgress
β”‚   β””β”€β”€ AudioRecorder
β”‚
β”β”€β”€ MainMenu
β”‚   β”β”€β”€ IntentGrid
β”‚   β”‚   β”β”€β”€ IntentCard (YES)
β”‚   β”‚   β”β”€β”€ IntentCard (NO)
β”‚   β”‚   β”β”€β”€ IntentCard (HELP)
β”‚   β”‚   β””β”€β”€ IntentCard (EMERGENCY)
β”‚   β””β”€β”€ AudioRecorder
β”‚
β”β”€β”€ HelpMenu
β”‚   β”β”€β”€ HelpOptions
β”‚   β”‚   β”β”€β”€ OptionCard (1 - Water)
β”‚   β”‚   β”β”€β”€ OptionCard (2 - Food)
β”‚   β”‚   β”β”€β”€ OptionCard (3 - Washroom)
β”‚   β”‚   β””β”€β”€ OptionCard (4 - Pain)
β”‚   β”β”€β”€ AudioRecorder
β”‚   β””β”€β”€ BackButton
β”‚
β”β”€β”€ ConfirmationDialog (Modal)
β”‚   β”β”€β”€ Message
β”‚   β”β”€β”€ ConfirmButton
β”‚   β””β”€β”€ CancelButton
β”‚
β””β”€β”€ EmergencyAlert (Overlay)
    β”β”€β”€ AlertIcon
    β”β”€β”€ AlertMessage
    β””β”€β”€ PulseAnimation
```

## Data Flow

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    State Management                      β”‚
β”‚                      (React State)                       β”‚
β”‚                                                          β”‚
β”‚  currentView: 'main' | 'help' | 'onboarding'           β”‚
β”‚  showConfirmation: boolean                              β”‚
β”‚  showEmergency: boolean                                 β”‚
β”‚  isOnboarded: boolean                                   β”‚
β”‚  pendingIntent: {intent, message} | null               β”‚
β”‚  feedback: string                                       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                          β†“
         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β†“                                  β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”            β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  User Actions    β”‚            β”‚  API Responses   β”‚
β”‚                  β”‚            β”‚                  β”‚
β”‚  β€Ά Record audio  β”‚            β”‚  β€Ά Intent        β”‚
β”‚  β€Ά Confirm       β”‚            β”‚  β€Ά Confidence    β”‚
β”‚  β€Ά Cancel        β”‚            β”‚  β€Ά Message       β”‚
β”‚  β€Ά Navigate      β”‚            β”‚  β€Ά Errors        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”            β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚                               β”‚
         β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β†’ UPDATE β†β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                        β†“
              β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚  UI Re-render   β”‚
              β”‚                 β”‚
              β”‚  β€Ά Show feedbackβ”‚
              β”‚  β€Ά Update view  β”‚
              β”‚  β€Ά Show dialogs β”‚
              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## API Request Flow

```
Frontend                    Backend
   β”‚                           β”‚
   β”‚  1. User clicks "Speak"   β”‚
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚
   β”‚                           β”‚
   β”‚  2. Record 3s audio       β”‚
   β”‚     β†“                     β”‚
   β”‚  3. Create FormData       β”‚
   β”‚     β†“                     β”‚
   β”‚  4. POST /api/classify    β”‚
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚
   β”‚                           β”‚ 5. Process audio
   β”‚                           β”‚    β†“
   β”‚                           β”‚ 6. Extract features
   β”‚                           β”‚    β†“
   β”‚                           β”‚ 7. Classify intent
   β”‚                           β”‚    β†“
   β”‚                           β”‚ 8. Build response
   β”‚                           β”‚
   β”‚  9. Receive JSON          β”‚
   β”‚β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
   β”‚  {intent, confidence,     β”‚
   β”‚   requires_confirmation}  β”‚
   β”‚                           β”‚
   β”‚  10. Update UI            β”‚
   β”‚     β†“                     β”‚
   β”‚  11. Show result          β”‚
   β”‚     OR                    β”‚
   β”‚  12. Show confirmation    β”‚
   β”‚                           β”‚
   β”‚  13. POST /api/confirm    β”‚
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚
   β”‚                           β”‚ 14. Log confirmation
   β”‚                           β”‚
   β”‚  15. Execute action       β”‚
   β”‚β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
   β”‚                           β”‚
```

## Confidence Decision Tree

```
                   [Intent Classified]
                          β†“
                  [Calculate Confidence]
                          β†“
              β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β†“                       β†“
      [confidence >= 0.85]    [confidence < 0.85]
              β†“                       β†“
        β”β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”           [Requires Confirmation]
        β†“           β†“                 β†“
    [EMERGENCY] [Other]         [Show Dialog]
        β†“           β†“                 β†“
    [Skip       [Direct        β”β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”
     Confirm]    Action]       β†“           β†“
        β†“           β†“       [Confirm]  [Cancel]
        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”           β†“
                    β†“                  [Retry]
              [Execute Action]              β†“
                    β†“                  [Back to Menu]
              [Show Feedback]
                    β†“
              [Return to Main]
```

## Emergency Flow

```
[User Says "EMERGENCY"]
         β†“
[Audio Captured]
         β†“
[Sent to Backend]
         β†“
[Classified as EMERGENCY]
         β†“
[Confidence Boosted]  β† Safety mechanism
         β†“
[Skip Confirmation]   β† Speed priority
         β†“
[Return to Frontend]
         β†“
[Trigger Alert]
         β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Emergency Overlay     β”‚
β”‚                        β”‚
β”‚  π¨ EMERGENCY ALERT    β”‚
β”‚                        β”‚
β”‚  Caregivers notified   β”‚
β”‚  Help is on the way    β”‚
β”‚                        β”‚
β”‚  [Pulse Animation]     β”‚
β”‚  [Flash Effect]        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β†“
[POST /api/emergency-alert]
         β†“
[Backend Logs]
         β†“
[In Production: Send SMS/Email/WebSocket]
         β†“
[5-second timer]
         β†“
[Auto-dismiss]
         β†“
[Return to Main Menu]
```

## Onboarding State Machine

```
[Start Onboarding]
         β†“
    currentStep = 0
    currentIntent = "YES"
    samplesCollected = {}
         β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Record Sample Loop    β”‚
β”‚                        β”‚
β”‚  1. Show current       β”‚
β”‚     intent label       β”‚
β”‚  2. Record audio       β”‚
β”‚  3. Send to backend    β”‚
β”‚  4. Increment count    β”‚
β”‚  5. Check if enough    β”‚
β”‚     (need 3)           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
        β†“
   [Enough samples?]
        β”‚
    NO β”€β” (repeat)
        β”‚
    YES β”€β”
        β†“
   [Next intent]
        β†“
   currentStep++
   currentIntent = intents[currentStep]
        β†“
   [All intents done?]
        β”‚
    NO β”€β” (back to loop)
        β”‚
    YES β”€β”
        β†“
[POST /api/onboarding/complete]
        β†“
[Train Model]
        β†“
[Set isOnboarded = true]
        β†“
[Navigate to Main Menu]
```

---

## File Organization

```
backend/
β”β”€β”€ app.py                    # FastAPI app, routes, middleware
β”β”€β”€ models/
β”‚   β”β”€β”€ __init__.py
β”‚   β””β”€β”€ intent_classifier.py  # Classification logic
β”β”€β”€ audio/
β”‚   β”β”€β”€ __init__.py
β”‚   β””β”€β”€ processor.py          # Audio processing
β”β”€β”€ services/
β”‚   β”β”€β”€ __init__.py
β”‚   β””β”€β”€ personalization.py    # User model management
β”β”€β”€ test_api.py               # API tests
β””β”€β”€ requirements.txt          # Dependencies

frontend/frontendsti/src/
β”β”€β”€ App.jsx                   # Root component
β”β”€β”€ App.css                   # Global styles
β”β”€β”€ main.jsx                  # Entry point
β”β”€β”€ index.css                 # Base styles
β””β”€β”€ components/
    β”β”€β”€ MainMenu.jsx          # Main intent selection
    β”β”€β”€ MainMenu.css
    β”β”€β”€ HelpMenu.jsx          # Help submenu
    β”β”€β”€ HelpMenu.css
    β”β”€β”€ AudioRecorder.jsx     # Audio capture
    β”β”€β”€ AudioRecorder.css
    β”β”€β”€ ConfirmationDialog.jsx # Confirmation UI
    β”β”€β”€ ConfirmationDialog.css
    β”β”€β”€ EmergencyAlert.jsx    # Emergency overlay
    β”β”€β”€ EmergencyAlert.css
    β”β”€β”€ OnboardingFlow.jsx    # Onboarding wizard
    β””β”€β”€ OnboardingFlow.css
```

---

## Technology Stack

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚              Frontend Layer                  β”‚
β”‚                                             β”‚
β”‚  React 18                                   β”‚
β”‚  β”β”€β”€ State Management (useState)           β”‚
β”‚  β”β”€β”€ Component Architecture                β”‚
β”‚  β””β”€β”€ CSS Modules                            β”‚
β”‚                                             β”‚
β”‚  Vite                                       β”‚
β”‚  β”β”€β”€ Development Server                    β”‚
β”‚  β”β”€β”€ Hot Module Replacement                β”‚
β”‚  β””β”€β”€ Build Optimization                    β”‚
β”‚                                             β”‚
β”‚  Browser APIs                               β”‚
β”‚  β”β”€β”€ MediaRecorder (Audio Capture)         β”‚
β”‚  β”β”€β”€ Fetch (HTTP Client)                   β”‚
β”‚  β””β”€β”€ FormData (File Upload)                β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β†“ HTTP/JSON
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚              Backend Layer                   β”‚
β”‚                                             β”‚
β”‚  FastAPI                                    β”‚
β”‚  β”β”€β”€ Async Request Handling                β”‚
β”‚  β”β”€β”€ Automatic API Documentation           β”‚
β”‚  β”β”€β”€ Pydantic Validation                   β”‚
β”‚  β””β”€β”€ CORS Middleware                        β”‚
β”‚                                             β”‚
β”‚  Python                                     β”‚
β”‚  β”β”€β”€ NumPy (Feature Processing)            β”‚
β”‚  β”β”€β”€ Logging (Monitoring)                  β”‚
β”‚  β””β”€β”€ Type Hints (Code Quality)             β”‚
β”‚                                             β”‚
β”‚  Uvicorn                                    β”‚
β”‚  β””β”€β”€ ASGI Server                            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

This architecture prioritizes:
- β… Separation of concerns
- β… Modularity and extensibility
- β… User safety and reliability
- β… Clear data flow
- β… Responsive user feedback
